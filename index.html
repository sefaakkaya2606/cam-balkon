<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kasetli Sürme Cam Balkon — Hesaplama</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Basit, koyu-tema stilleri (style.css yoksa iş görsün diye) */
    :root { color-scheme: dark; }
    body{margin:0;font-family:system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;background:#0f172a;color:#e2e8f0}
    .container{max-width:980px;margin:32px auto;padding:0 16px}
    h1{font-size:24px;margin:0 0 16px}
    h2{font-size:18px;margin:24px 0 12px}
    h3{font-size:16px;margin:18px 0 10px}
    .card{background:#0b1220;border:1px solid #1f2a44;border-radius:10px;padding:16px;margin-bottom:20px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
    label{font-size:12px;color:#9fb0c9;display:block;margin-bottom:6px}
    input,select,button{width:100%;box-sizing:border-box}
    input,select{background:#0a1327;border:1px solid #22304d;border-radius:8px;color:#e2e8f0;padding:10px}
    .btn{background:#1e293b;border:1px solid #334155;color:#e2e8f0;border-radius:8px;padding:10px 12px;cursor:pointer}
    .btn:hover{background:#273449}
    .btn.primary{background:#3b5bdb;border-color:#3b5bdb}
    .btn.primary:hover{background:#3150da}
    .btn.small{padding:8px}
    .btn.outline{background:transparent;border-color:#475569}
    .fieldset{border:1px dashed #334155;border-radius:10px;padding:12px;margin:10px 0}
    .legend{font-size:12px;color:#9fb0c9;margin-bottom:8px}
    .badge{margin-top:6px;font-size:12px;color:#a3e635}
    .muted{font-size:12px;color:#94a3b8}
    .hidden{display:none}
    .result{background:#0b1220;border:1px dashed #334155;border-radius:10px;padding:12px;margin-top:12px}
    .toolbar{display:flex;gap:10px;align-items:center;justify-content:space-between;margin:10px 0}
  </style>
</head>
<body>
  <main class="container">
    <h1>Kasetli Sürme Cam Balkon — Hesaplama</h1>

    <!-- Hesaplama -->
    <section class="card">
      <div class="grid2">
        <div>
          <label>Genişlik (mm)</label>
          <input id="genislik" type="number" placeholder="örn. 4000" />
        </div>
        <div>
          <label>Yükseklik (mm)</label>
          <input id="yukseklik" type="number" placeholder="örn. 2000" />
        </div>

        <div>
          <label>Cam Sayısı</label>
          <select id="camSayisi">
            <option value="" disabled selected>Seçin</option>
            <option>2</option><option>3</option><option>4</option><option>5</option>
            <option>6</option><option>7</option><option>8</option><option>9</option>
            <option>10</option><option>11</option><option>12</option>
          </select>
        </div>

        <div>
          <label>Cam Özelliği (renk dahil)</label>
          <select id="camOzelligi">
            <option value="8_seffaf">8 mm — Şeffaf</option>
            <option value="8_fume">8 mm — Füme</option>
            <option value="20_seffaf">20 mm (4+12+4) — Şeffaf</option>
            <option value="20_fume">20 mm (4+12+4) — Füme</option>
          </select>
        </div>

        <div>
          <label>Açılım Tipi</label>
          <select id="acilim">
            <option value="yandan" selected>Yandan Açılır</option>
            <option value="ortadan">Ortadan Açılır</option>
          </select>
          <div id="acilimUyari" class="muted"></div>
        </div>

        <div>
          <label>Ray Sistemi</label>
          <select id="ray">
            <option value="esikli" selected>Eşikli</option>
            <option value="esiksiz">Eşiksiz</option>
          </select>
        </div>

        <div>
          <label>Profil Rengi</label>
          <select id="profilRengi">
            <option value="agri" selected>A. Gri (antrasit)</option>
            <option value="rall">RALL</option>
          </select>
          <div id="aktifAluFiyati" class="badge"></div>
        </div>
      </div>

      <!-- Kilit alanları -->
      <div id="kilitYandan" class="fieldset">
        <div class="legend">Kilit Seçimi (Yandan)</div>
        <div class="grid2">
          <div>
            <label>Sağ Kilit</label>
            <select id="kilitSag">
              <option>Klips Kol</option>
              <option>Multi Kilit</option>
              <option>Anahtarlı Kilit</option>
              <option>İspanyolet Kol</option>
            </select>
          </div>
          <div>
            <label>Sol Kilit</label>
            <select id="kilitSol">
              <option>Klips Kol</option>
              <option>Multi Kilit</option>
              <option>Anahtarlı Kilit</option>
              <option>İspanyolet Kol</option>
            </select>
          </div>
        </div>
      </div>

      <div id="kilitOrtadan" class="fieldset hidden">
        <div class="legend">Kilit Seçimi (Ortadan)</div>
        <div class="grid3">
          <div>
            <label>Sağ Kilit</label>
            <select id="kilitSagO">
              <option>Klips Kol</option><option>Multi Kilit</option>
              <option>Anahtarlı Kilit</option><option>İspanyolet Kol</option>
            </select>
          </div>
          <div>
            <label>Sol Kilit</label>
            <select id="kilitSolO">
              <option>Klips Kol</option><option>Multi Kilit</option>
              <option>Anahtarlı Kilit</option><option>İspanyolet Kol</option>
            </select>
          </div>
          <div>
            <label>Orta Kilit</label>
            <select id="kilitOrtaO">
              <option>Klips Kol</option><option>Multi Kilit</option>
              <option>Anahtarlı Kilit</option><option>İspanyolet Kol</option>
            </select>
          </div>
        </div>
      </div>

      <button id="hesaplaBtn" class="btn primary">Hesapla</button>
      <div id="ozet" class="result hidden"></div>
    </section>

    <!-- Yönetici -->
    <section class="card">
      <h2>Yönetici</h2>

      <!-- Giriş -->
      <div id="admin-login-box">
        <div class="grid2">
          <div>
            <label>Kullanıcı Adı</label>
            <input id="adminUser" placeholder="örn. admin" />
          </div>
          <div>
            <label>PIN</label>
            <input id="adminPin" placeholder="örn. 3482" />
          </div>
        </div>
        <button id="btnAdminLogin" class="btn">Giriş Yap</button>
        <p class="muted" style="margin-top:8px">
          İlk kurulum için varsayılan yönetici: <strong>admin / 3482</strong><br>
          Giriş yaptıktan sonra PIN’i değiştirebilir ve yeni yönetici ekleyebilirsiniz.
        </p>
      </div>

      <!-- Panel -->
      <div id="admin-panel" class="hidden">
        <div class="toolbar">
          <div>Giriş: <strong id="whoami"></strong></div>
          <button id="btnLogout" class="btn outline">Çıkış</button>
        </div>

        <h3>Fiyat Ayarları</h3>
        <div class="grid2">
          <div>
            <label>Alüminyum (₺/kg) — Antrasit</label>
            <input id="priceAluStd" type="number" step="0.01" />
          </div>
          <div>
            <label>Alüminyum (₺/kg) — RALL</label>
            <input id="priceAluRall" type="number" step="0.01" />
          </div>

          <div>
            <label>İşçilik (₺/m²)</label>
            <input id="priceLabor" type="number" step="0.01" />
          </div>
          <div>
            <label>Fire (%)</label>
            <input id="wastePct" type="number" step="0.01" />
          </div>

          <div>
            <label>8 mm Şeffaf (₺/m²)</label>
            <input id="price8Clr" type="number" step="0.01" />
          </div>
          <div>
            <label>8 mm Füme (₺/m²)</label>
            <input id="price8Smoke" type="number" step="0.01" />
          </div>

          <div>
            <label>Çift Şeffaf (₺/m²)</label>
            <input id="price20Clr" type="number" step="0.01" />
          </div>
          <div>
            <label>Çift Füme (₺/m²)</label>
            <input id="price20Smoke" type="number" step="0.01" />
          </div>
        </div>
        <button id="btnSavePrices" class="btn">Kaydet</button>

        <h3>Güvenlik</h3>
        <div class="grid3">
          <div>
            <label>Yeni PIN</label>
            <input id="newPin" placeholder="Yeni PIN" />
            <button id="btnChangePin" class="btn small">PIN’i Güncelle</button>
          </div>
          <div>
            <label>Yeni Yönetici — Kullanıcı</label>
            <input id="newAdminUser" placeholder="kullanıcı" />
          </div>
          <div>
            <label>Yeni Yönetici — PIN</label>
            <input id="newAdminPin" placeholder="pin" />
            <button id="btnAddAdmin" class="btn small">Yönetici Ekle</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Firebase (compat) — sadece bir kez -->
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-database-compat.js"></script>

  <!-- Uygulama kodu -->
  <script src="script.js"></script>
</body>
</html>
